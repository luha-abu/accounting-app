import{Q as w,T as g,p as y,q as h,w as m,o as d,b as t,a as B,u as n,j as k,d as C,e as E,g as l,v as c,G as T,c as f,s as x,F as I,I as b,t as S}from"./app-DEG2fIWE.js";import{_ as V}from"./AppLayout-XjNkS1Zv.js";import{s as r}from"./luha-BYdl1bA2.js";import{S as A}from"./sweetalert2-z6gKu1nJ.js";import"./moment-C5S46NFB.js";const q={class:"navbar shadow-sm bg-body-tertiary"},D={class:"container-fluid"},U={class:"left-bar"},F={class:"navbar-brand mb-0 h1 py-0"},M={class:"container py-3"},N={class:"row g-2 mb-3"},j={class:"col-6"},L={class:"form-group"},$={class:"col-6"},G={class:"form-group"},O={class:"form-group mb-3"},P=["value"],Q={class:"row mb-4"},Y={class:"col-6"},z={class:"form-group"},H=["disabled"],Z={__name:"Edit",props:{sale:Object,contacts:Array},setup(u){const p=w(),i=u,e=g({id:i.sale.id,invoice_no:i.sale.invoice_no,invoice_date:i.sale.invoice_date,contact:i.sale.contact_id,amount:i.sale.amount}),v=async()=>{const{data:a}=await b.get(route("sale.getInvoiceBalance",{id:e.id}));if(e.amount!=parseFloat(a)){r("Invoice has been blocked.");return}e.put(route("sales.update",e.id),{onError:o=>{for(let s in o)r(o[s])}})},_=async a=>{const{data:o}=await b.get(route("sale.getInvoiceBalance",{id:e.id}));if(e.amount!=parseFloat(o)){r("Invoice has been blocked.");return}A.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&e.delete(route("sales.destroy",a))})};return y(()=>{let a=p.props.flash.message;a&&r(a)}),(a,o)=>(d(),h(V,{title:"Create Sale"},{default:m(()=>[t("nav",q,[t("div",D,[t("div",U,[t("span",F,[B(n(k),{href:a.route("sales.index"),class:"btn btn-link"},{default:m(()=>o[6]||(o[6]=[t("i",{class:"bi bi-chevron-left"},null,-1)])),_:1},8,["href"]),o[7]||(o[7]=C("Edit Sale"))])])])]),t("div",M,[t("form",{onSubmit:E(v,["prevent"])},[t("div",N,[t("div",j,[t("div",L,[o[8]||(o[8]=t("label",{for:"invoice_no",class:"form-label"},"Invoice No",-1)),l(t("input",{type:"text",class:"form-control fw-bold","onUpdate:modelValue":o[0]||(o[0]=s=>n(e).invoice_no=s),required:""},null,512),[[c,n(e).invoice_no]])])]),t("div",$,[t("div",G,[o[9]||(o[9]=t("label",{for:"invoice_no",class:"form-label"},"Invoice Date",-1)),l(t("input",{type:"date",class:"form-control fw-bold","onUpdate:modelValue":o[1]||(o[1]=s=>n(e).invoice_date=s),required:""},null,512),[[c,n(e).invoice_date]])])])]),t("div",O,[o[10]||(o[10]=t("label",{for:"contact",class:"form-label"},"Contact",-1)),l(t("select",{name:"contact",id:"contact",class:"form-select fw-bold","onUpdate:modelValue":o[2]||(o[2]=s=>n(e).contact=s),required:""},[(d(!0),f(I,null,x(u.contacts,s=>(d(),f("option",{value:s.id},S(s.name),9,P))),256))],512),[[T,n(e).contact]])]),t("div",Q,[t("div",Y,[t("div",z,[o[11]||(o[11]=t("label",{for:"amount",class:"form-label"},"Amount",-1)),l(t("input",{type:"number",class:"form-control fw-bold","onUpdate:modelValue":o[3]||(o[3]=s=>n(e).amount=s),required:""},null,512),[[c,n(e).amount]])])])]),t("button",{class:"btn btn-success w-100 fw-bold",onClick:o[4]||(o[4]=(...s)=>a.showAlert&&a.showAlert(...s)),disabled:n(e).processing},"UPDATE",8,H),t("button",{class:"btn btn-danger w-100 mt-3 fw-bold",onClick:o[5]||(o[5]=s=>_(n(e).id)),type:"button"},"DELETE")],32)])]),_:1}))}};export{Z as default};
