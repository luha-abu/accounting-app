import{Q as _,T as y,p as g,q as w,w as m,o as r,b as o,a as k,u as a,j as x,d as V,e as q,g as i,v as d,G as B,c as f,s as D,F as E,H as S,t as U}from"./app-BMtln1of.js";import{_ as C}from"./AppLayout-w6n3NBIr.js";import{s as c}from"./luha-m8E33gU6.js";const I={class:"navbar shadow-sm bg-body-tertiary"},M={class:"container-fluid"},N={class:"left-bar"},T={class:"navbar-brand mb-0 h1 py-0"},F={class:"container py-3"},h={class:"row g-2 mb-3"},j={class:"col-6"},A={class:"form-group"},$={class:"col-6"},G={class:"form-group"},H={class:"form-group mb-3"},L=["value"],O={class:"row mb-3"},Q={class:"col-6"},z={class:"form-group mb-3"},R={__name:"Edit",props:{sale:Object,contacts:Array},setup(u){const b=_(),l=u,e=y({id:l.sale.id,invoice_no:l.sale.invoice_no,invoice_date:l.sale.invoice_date,contact:l.sale.contact_id,amount:l.sale.amount}),p=async()=>{e.put(route("sales.update",e.id),{onError:n=>{for(let t in n)c(n[t])}})},v=async n=>{const{data:t}=await S.get(route("sale.getInvoiceBalance",{id:e.id}));if(e.amount!=parseFloat(t)){c("Invoice has been blocked.");return}confirm("Do you want to delete?")&&e.delete(route("sales.destroy",n))};return g(()=>{let n=b.props.flash.message;n&&c(n)}),(n,t)=>(r(),w(C,{title:"Create Sale"},{default:m(()=>[o("nav",I,[o("div",M,[o("div",N,[o("span",T,[k(a(x),{href:n.route("sales.index"),class:"btn btn-link"},{default:m(()=>t[5]||(t[5]=[o("i",{class:"bi bi-arrow-left"},null,-1)])),_:1},8,["href"]),t[6]||(t[6]=V("Edit Sale"))])])])]),o("div",F,[o("form",{onSubmit:q(p,["prevent"])},[o("div",h,[o("div",j,[o("div",A,[t[7]||(t[7]=o("label",{for:"invoice_no",class:"form-label"},"Invoice No",-1)),i(o("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>a(e).invoice_no=s),required:""},null,512),[[d,a(e).invoice_no]])])]),o("div",$,[o("div",G,[t[8]||(t[8]=o("label",{for:"invoice_no",class:"form-label"},"Invoice Date",-1)),i(o("input",{type:"date",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=s=>a(e).invoice_date=s),required:""},null,512),[[d,a(e).invoice_date]])])])]),o("div",H,[t[9]||(t[9]=o("label",{for:"contact",class:"form-label"},"Contact",-1)),i(o("select",{name:"contact",id:"contact",class:"form-select","onUpdate:modelValue":t[2]||(t[2]=s=>a(e).contact=s),required:""},[(r(!0),f(E,null,D(u.contacts,s=>(r(),f("option",{value:s.id},U(s.name),9,L))),256))],512),[[B,a(e).contact]])]),o("div",O,[o("div",Q,[o("div",z,[t[10]||(t[10]=o("label",{for:"amount",class:"form-label"},"Amount",-1)),i(o("input",{type:"number",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>a(e).amount=s),required:""},null,512),[[d,a(e).amount]])])])]),t[11]||(t[11]=o("button",{class:"btn btn-success w-100"},"Update",-1)),o("button",{class:"btn btn-danger w-100 mt-3",onClick:t[4]||(t[4]=s=>v(a(e).id)),type:"button"},"Delete")],32)])]),_:1}))}};export{R as default};
